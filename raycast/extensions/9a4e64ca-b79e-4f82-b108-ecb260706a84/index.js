"use strict";var x=Object.create;var y=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var M=(o,r)=>()=>(r||o((r={exports:{}}).exports,r),r.exports),O=(o,r)=>{for(var t in r)y(o,t,{get:r[t],enumerable:!0})},P=(o,r,t,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of T(r))!C.call(o,n)&&n!==t&&y(o,n,{get:()=>r[n],enumerable:!(e=$(r,n))||e.enumerable});return o};var j=(o,r,t)=>(t=o!=null?x(k(o)):{},P(r||!o||!o.__esModule?y(t,"default",{value:o,enumerable:!0}):t,o)),A=o=>P(y({},"__esModule",{value:!0}),o);var h=M((R,v)=>{v.exports=function(o){var r={};function t(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return o[e].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=o,t.c=r,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n||4&n&&typeof e=="object"&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&typeof e!="string")for(var a in e)t.d(i,a,function(l){return e[l]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(o,r,t){let{exec:e}=t(1),n=t(2).promisify(e);o.exports={play:async(i,a=.5)=>{let l=process.platform==="darwin"?Math.min(2,2*a):a,d=process.platform==="darwin"?((u,m)=>`afplay "${u}" -v ${m}`)(i,l):((u,m)=>`powershell -c Add-Type -AssemblyName presentationCore; $player = New-Object system.windows.media.mediaplayer; ${(c=>`$player.open('${c}');`)(u)} $player.Volume = ${m}; $player.Play(); Start-Sleep 1; Start-Sleep -s $player.NaturalDuration.TimeSpan.TotalSeconds;Exit;`)(i,l);try{await n(d)}catch(u){throw u}}}},function(o,r){o.exports=require("child_process")},function(o,r){o.exports=require("util")}])});var I={};O(I,{default:()=>N});module.exports=A(I);var s=require("@raycast/api"),p=require("react"),b=j(h()),f=require("react/jsx-runtime");function N(o){let{bpm:r,group:t=1}=o.arguments,[e,n]=(0,p.useState)(0),i=(0,p.useRef)(1),[a,l]=(0,p.useState)(!0),d=()=>{a?u():m()},u=()=>{l(!1),n(0),i.current=1},m=()=>{l(!0)};if((0,p.useEffect)(()=>{let c=null,S=6e4/Number(r);function g(){i.current===1?b.default.play(s.environment.assetsPath+"/sfx/metronome-click.wav"):b.default.play(s.environment.assetsPath+"/sfx/metronome-click_lower.wav"),i.current===Number(t)?i.current=1:i.current+=1,n(w=>w+1)}return a&&(c=setInterval(g,S)),()=>{c&&clearInterval(c)}},[r,t,a]),!isNaN(Number(r))&&Number(r)>0&&Number(r)<500&&!isNaN(Number(t)||1)&&Number(t||1)>0&&Number(t||1)<500){let c=a?"Click \u21B5 to pause":"Click \u21B5 to play";return(0,f.jsx)(s.List,{searchBarPlaceholder:"",searchText:"",children:(0,f.jsx)(s.List.EmptyView,{title:`BPM: ${r} | Accents: Per ${t||1} ${t==1?"Click":"Clicks"} | Clicks: ${e}`,description:c,icon:e%2===0?"metronome-left.png":"metronome-right.png",actions:(0,f.jsx)(s.ActionPanel,{children:(0,f.jsx)(s.Action,{title:a?"Pause":"Play",icon:a?s.Icon.Pause:s.Icon.Play,onAction:d})})})})}else return(0,s.showToast)({style:s.Toast.Style.Failure,title:"Invalid Inputs",message:"Inputs must be positive numbers below 500"}),(0,s.popToRoot)(),null}
